<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Doraemon Inventory - Reports</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; }
    .text-brand { color: #6c2bd9 !important; }
    .dropdown-menu { display: none; }
    .dropdown-menu.show { display: block; }
    .tab-button.active {
      background-color: #0ea5e9;
      color: white;
    }
    .report-section { display: none; }
    .report-section.active { display: block; }
  </style>
</head>

<body class="bg-gray-50">
  <div class="min-h-screen flex">
    <!-- Sidebar -->
    <aside class="w-72 bg-white border-r border-gray-200 py-8 px-6 h-screen overflow-y-auto">
      <div class="mb-10">
        <div class="text-2xl font-extrabold text-brand">Doraemon <span class="text-brand">Inventory</span></div>
      </div>

      <nav class="space-y-2 text-sm text-slate-700">
        <div class="text-xs text-slate-400 uppercase mb-2">General</div>
        <a href="index.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-3m0 0l7-4 7 4M5 9v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9"/></svg>
          <span>Dashboard</span>
        </a>
        <a href="inventory.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h18M3 12h18M3 17h18"/></svg>
          <span>Inventory</span>
        </a>
        <a href="stock-history.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/></svg>
          <span>Stock History</span>
        </a>
        <a href="reports.html" class="flex items-center gap-3 px-3 py-2 rounded-lg bg-sky-500 text-white">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
          <span>Reports</span>
        </a>

        <div class="mt-6 text-xs text-slate-400 uppercase">Manage User</div>
        <a href="user-requests.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 0 0-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 0 1 5.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 0 1 9.288 0M15 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM7 10a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/></svg>
          <span>User Request</span>
        </a>
        <a href="user-list.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <span>User List</span>
        </a>
      </nav>
    </aside>

    <!-- Main content -->
    <div class="flex-1 flex flex-col">
      <!-- Header -->
      <header class="flex items-center justify-between bg-white border-b border-gray-200 px-8 py-4">
        <div>
          <h1 class="text-2xl font-bold text-slate-700">Reports & Analytics</h1>
          <p class="text-sm text-slate-500">Comprehensive inventory reports and analysis</p>
        </div>

        <div class="flex items-center gap-4">
          <div class="flex items-center gap-3">
            <div id="avatarContainer" class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white text-lg font-bold overflow-hidden">
              <span id="avatarInitial">U</span>
              <img id="profileImage" class="hidden w-full h-full object-cover" alt="Profile" />
            </div>
            <div class="text-sm text-slate-600"><span id="displayUsername">Loading...</span><br/><span class="text-xs text-slate-400" id="displayRole">...</span></div>
          </div>
          <div class="relative">
            <button id="menuButton" class="text-gray-400 hover:text-gray-600">‚ãÆ</button>
            <div id="dropdownMenu" class="dropdown-menu absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10">
              <a href="profile.html" class="block px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 rounded-t-lg">Profile</a>
              <a href="#" onclick="logout()" class="block px-4 py-3 text-sm text-red-600 hover:bg-slate-50 rounded-b-lg">Logout</a>
            </div>
          </div>
        </div>
      </header>

      <!-- Page content -->
      <div class="flex-1 overflow-auto px-8 py-8">
        <div class="max-w-7xl mx-auto">
          <!-- Report Tabs -->
          <div class="bg-white border border-gray-200 rounded-lg p-2 mb-6 flex gap-2 overflow-x-auto">
            <button onclick="switchReport('stock-summary')" class="tab-button active px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap">üìä Stock Summary</button>
            <button onclick="switchReport('low-stock')" class="tab-button px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap">‚ö†Ô∏è Low Stock</button>
            <button onclick="switchReport('sales-analysis')" class="tab-button px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap">üíπ Sales Analysis</button>
            <button onclick="switchReport('inventory-valuation')" class="tab-button px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap">üí∞ Inventory Valuation</button>
          </div>

          <!-- Report 1: Stock Summary -->
          <div id="stock-summary" class="report-section active">
            <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
              <div class="flex items-center justify-between mb-6">
                <div>
                  <h2 class="text-xl font-bold text-slate-700">Stock Summary Report</h2>
                  <p class="text-sm text-slate-500">‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</p>
                </div>
                <div class="flex gap-2">
                  <button onclick="exportStockSummaryPDF()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600">üìÑ Export PDF</button>
                  <button onclick="exportStockSummaryExcel()" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600">üìä Export Excel</button>
                </div>
              </div>

              <!-- Overall Summary Cards -->
              <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                  <div class="text-sm text-blue-600 mb-1">Total Products</div>
                  <div id="summary-total-products" class="text-2xl font-bold text-blue-700">0</div>
                </div>
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                  <div class="text-sm text-green-600 mb-1">Total Quantity</div>
                  <div id="summary-total-quantity" class="text-2xl font-bold text-green-700">0</div>
                </div>
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                  <div class="text-sm text-purple-600 mb-1">Total Value</div>
                  <div id="summary-total-value" class="text-2xl font-bold text-purple-700">$0.00</div>
                </div>
              </div>

              <!-- Summary Table -->
              <div class="overflow-x-auto">
                <table class="w-full text-sm">
                  <thead>
                    <tr class="border-b-2 border-gray-300 bg-slate-50">
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Product Type</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Product Count</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Quantity</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Value</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Avg Price</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Min Stock</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Max Stock</th>
                    </tr>
                  </thead>
                  <tbody id="stock-summary-table">
                    <tr><td colspan="7" class="text-center py-4 text-slate-400">Loading...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Report 2: Low Stock (Stock Movement removed) -->
          <div id="stock-movement" class="report-section" style="display: none;">
            <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
              <div class="flex items-center justify-between mb-6">
                <div>
                  <h2 class="text-xl font-bold text-slate-700">Stock Movement Report</h2>
                  <p class="text-sm text-slate-500">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏™‡∏ï‡πá‡∏≠‡∏Å IN/OUT</p>
                </div>
                <div class="flex gap-2">
                  <button onclick="exportStockMovementCSV()" class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600">üìë Export CSV</button>
                  <button onclick="exportStockMovementPDF()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600">üìÑ Export PDF</button>
                </div>
              </div>

              <!-- Filters -->
              <div class="grid grid-cols-4 gap-4 mb-4 p-4 bg-slate-50 rounded-lg">
                <div>
                  <label class="block text-xs text-slate-600 mb-1">Start Date</label>
                  <input type="date" id="movement-start-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                </div>
                <div>
                  <label class="block text-xs text-slate-600 mb-1">End Date</label>
                  <input type="date" id="movement-end-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                </div>
                <div>
                  <label class="block text-xs text-slate-600 mb-1">Type</label>
                  <select id="movement-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                    <option value="">All Types</option>
                  </select>
                </div>
                <div>
                  <label class="block text-xs text-slate-600 mb-1">Brand</label>
                  <select id="movement-brand" class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm">
                    <option value="">All Brands</option>
                  </select>
                </div>
              </div>
              <div class="mb-6">
                <button onclick="loadStockMovementReport()" class="w-full px-4 py-3 bg-sky-500 text-white rounded-lg font-medium hover:bg-sky-600 transition">
                  üîç Generate Report
                </button>
                <p class="text-xs text-slate-500 text-center mt-2">
                  üí° Tip: Leave filters empty to show all data, or select specific Type/Brand/Date range
                </p>
              </div>

              <!-- Summary Cards -->
              <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                  <div class="text-sm text-green-600 mb-1">Total Stock IN</div>
                  <div id="movement-total-in" class="text-xl font-bold text-green-700">0 units</div>
                  <div id="movement-value-in" class="text-sm text-green-600">$0.00</div>
                </div>
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                  <div class="text-sm text-red-600 mb-1">Total Stock OUT</div>
                  <div id="movement-total-out" class="text-xl font-bold text-red-700">0 units</div>
                  <div id="movement-value-out" class="text-sm text-red-600">$0.00</div>
                </div>
              </div>

              <!-- Chart -->
              <div class="mb-6">
                <canvas id="movementChart" height="80"></canvas>
              </div>

              <!-- Movement Table -->
              <div class="overflow-x-auto max-h-96">
                <table class="w-full text-sm">
                  <thead class="sticky top-0 bg-white">
                    <tr class="border-b-2 border-gray-300 bg-slate-50">
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Date</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Product</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Type</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Action</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Quantity</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Value</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Reference</th>
                    </tr>
                  </thead>
                  <tbody id="stock-movement-table">
                    <tr><td colspan="7" class="text-center py-4 text-slate-400">Click "Generate Report" to load data</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Report 3: Low Stock -->
          <div id="low-stock" class="report-section">
            <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
              <div class="flex items-center justify-between mb-6">
                <div>
                  <h2 class="text-xl font-bold text-slate-700">Low Stock Report</h2>
                  <p class="text-sm text-slate-500">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° (quantity &lt; 50)</p>
                </div>
                <div class="flex gap-2">
                  <button onclick="exportLowStockPDF()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600">üìÑ Export PDF</button>
                </div>
              </div>

              <!-- Summary -->
              <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                  <div class="text-sm text-red-600 mb-1">Low Stock Items</div>
                  <div id="lowstock-count" class="text-2xl font-bold text-red-700">0</div>
                </div>
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                  <div class="text-sm text-yellow-600 mb-1">Total Quantity</div>
                  <div id="lowstock-total-qty" class="text-2xl font-bold text-yellow-700">0</div>
                </div>
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                  <div class="text-sm text-orange-600 mb-1">Total Value</div>
                  <div id="lowstock-total-value" class="text-2xl font-bold text-orange-700">$0.00</div>
                </div>
              </div>

              <!-- Low Stock Table -->
              <div class="overflow-x-auto">
                <table class="w-full text-sm">
                  <thead>
                    <tr class="border-b-2 border-gray-300 bg-slate-50">
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Product</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Code</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Type</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Brand</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Current Stock</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Suggested Order</th>
                      <th class="text-left py-3 px-4 font-semibold text-slate-700">Last Restock</th>
                      <th class="text-right py-3 px-4 font-semibold text-slate-700">Sold (30d)</th>
                    </tr>
                  </thead>
                  <tbody id="low-stock-table">
                    <tr><td colspan="8" class="text-center py-4 text-slate-400">Loading...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Report 4: Sales Analysis -->
          <div id="sales-analysis" class="report-section">
            <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
              <div class="flex items-center justify-between mb-6">
                <div>
                  <h2 class="text-xl font-bold text-slate-700">Product Sales Analysis</h2>
                  <p class="text-sm text-slate-500">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</p>
                </div>
                <div class="flex gap-2">
                  <button onclick="exportSalesAnalysisPDF()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600">üìÑ Export PDF</button>
                </div>
              </div>

              <!-- Monthly Sales Chart -->
              <div class="mb-6">
                <h3 class="font-semibold text-slate-700 mb-4">Monthly Sales Trend</h3>
                <canvas id="monthlySalesChart" height="80"></canvas>
              </div>

              <!-- Sales by Type Chart -->
              <div class="mb-6">
                <h3 class="font-semibold text-slate-700 mb-4">Sales by Product Type</h3>
                <canvas id="salesByTypeChart" height="60"></canvas>
              </div>

              <!-- Top Selling Products -->
              <div class="mb-6">
                <h3 class="font-semibold text-slate-700 mb-4">Top Selling Products</h3>
                <div class="overflow-x-auto">
                  <table class="w-full text-sm">
                    <thead>
                      <tr class="border-b-2 border-gray-300 bg-slate-50">
                        <th class="text-center py-3 px-4 font-semibold text-slate-700">#</th>
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Product</th>
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Type</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Sold</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Sales Value</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Current Stock</th>
                      </tr>
                    </thead>
                    <tbody id="top-selling-table">
                      <tr><td colspan="6" class="text-center py-4 text-slate-400">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Slow Moving Products -->
              <div class="mb-6">
                <h3 class="font-semibold text-slate-700 mb-4">Slow Moving Products</h3>
                <div class="overflow-x-auto">
                  <table class="w-full text-sm">
                    <thead>
                      <tr class="border-b-2 border-gray-300 bg-slate-50">
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Product</th>
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Type</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Current Stock</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Sold</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Days in Inventory</th>
                      </tr>
                    </thead>
                    <tbody id="slow-moving-table">
                      <tr><td colspan="5" class="text-center py-4 text-slate-400">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Top Brands by Category -->
              <div>
                <h3 class="font-semibold text-slate-700 mb-4">Top Brands by Category</h3>
                <div id="brands-by-category-container">
                  <div class="text-center py-4 text-slate-400">Loading...</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Report 5: Inventory Valuation -->
          <div id="inventory-valuation" class="report-section">
            <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
              <div class="flex items-center justify-between mb-6">
                <div>
                  <h2 class="text-xl font-bold text-slate-700">Inventory Valuation Report</h2>
                  <p class="text-sm text-slate-500">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏ì ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</p>
                </div>
                <div class="flex gap-2">
                  <button onclick="exportValuationPDF()" class="px-4 py-2 bg-red-500 text-white rounded-lg text-sm font-medium hover:bg-red-600">üìÑ Export PDF</button>
                </div>
              </div>

              <!-- Overall Summary -->
              <div class="grid grid-cols-3 gap-4 mb-6">
                <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                  <div class="text-sm text-purple-600 mb-1">Total Products</div>
                  <div id="valuation-total-products" class="text-2xl font-bold text-purple-700">0</div>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                  <div class="text-sm text-blue-600 mb-1">Total Quantity</div>
                  <div id="valuation-total-quantity" class="text-2xl font-bold text-blue-700">0</div>
                </div>
                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                  <div class="text-sm text-green-600 mb-1">Total Value</div>
                  <div id="valuation-total-value" class="text-2xl font-bold text-green-700">$0.00</div>
                </div>
              </div>

              <!-- Valuation by Type Chart -->
              <div class="mb-6">
                <h3 class="font-semibold text-slate-700 mb-4">Valuation by Product Type</h3>
                <canvas id="valuationChart" height="70"></canvas>
              </div>

              <!-- Valuation Table by Type -->
              <div class="mb-6">
                <h3 class="font-semibold text-slate-700 mb-4">Breakdown by Product Type</h3>
                <div class="overflow-x-auto">
                  <table class="w-full text-sm">
                    <thead>
                      <tr class="border-b-2 border-gray-300 bg-slate-50">
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Product Type</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Product Count</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Quantity</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Value</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Avg Price</th>
                      </tr>
                    </thead>
                    <tbody id="valuation-by-type-table">
                      <tr><td colspan="5" class="text-center py-4 text-slate-400">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Top Value Products -->
              <div>
                <h3 class="font-semibold text-slate-700 mb-4">Top 20 Products by Value</h3>
                <div class="overflow-x-auto">
                  <table class="w-full text-sm">
                    <thead>
                      <tr class="border-b-2 border-gray-300 bg-slate-50">
                        <th class="text-center py-3 px-4 font-semibold text-slate-700">#</th>
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Product</th>
                        <th class="text-left py-3 px-4 font-semibold text-slate-700">Type</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Price</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Quantity</th>
                        <th class="text-right py-3 px-4 font-semibold text-slate-700">Total Value</th>
                      </tr>
                    </thead>
                    <tbody id="top-value-table">
                      <tr><td colspan="6" class="text-center py-4 text-slate-400">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <script src="assets/js/reports.js"></script>
</body>
</html>
